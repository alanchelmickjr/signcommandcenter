<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ASL Command Center - Assistive Technology ‚Ä¢ CLAUDE ‚Ä¢ GEMINI ‚Ä¢ VAPI ‚Ä¢ NEXT.JS</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ü</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ü</text></svg>">
    <meta name="theme-color" content="#4285f4">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>

    <div id="loadingScreenContainer"></div>
    <div id="settingsMenuContainer"></div>
    <div id="trainingModalContainer"></div>

    <main class="camera-container">
        <div class="video-wrapper">
            <video id="videoFeed" autoplay playsinline></video>
            <div class="dashboard-frame"></div>
                <div id="videoOverlay" class="video-overlay">
                    <div class="status-indicator status-ready"></div>
                    <span id="overlayText">Ready for ASL recognition</span>
                </div>
        </div>

        <div class="left-pane">
            <section class="identified-items">
                <div class="settings-row" style="margin-bottom: 15px;">
                    <h2 class="items-header" style="margin: 0;">AI Raw Output</h2>
                    <button id="toggleRawBtn" class="settings-input" style="padding: 5px 10px; cursor: pointer;">Show</button>
                </div>
                <div id="rawOutput" style="
                    display: block;
                    background: var(--surface-bg);
                    border-radius: var(--border-radius-sm);
                    box-shadow: var(--shadow-inset);
                    padding: var(--spacing-md);
                    margin-bottom: var(--spacing-md);
                    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
                    font-size: 0.8rem;
                    line-height: 1.4;
                    color: var(--text-secondary);
                    white-space: pre-wrap;
                    max-height: 200px;
                    overflow-y: auto;
                ">
                    AI responses will appear here...
                </div>
            </section>
            
            <section class="identified-items ">
                <h2 class="items-header">Recognized ASL Signs</h2>
                <div id="itemsList">
                    <p style="color: var(--text-secondary); font-style: italic;">
                        Start scanning to recognize ASL signs...
                    </p>
                </div>
            </section>

            <section class="control-button-wrapper">
                            <!-- ASL Recognition button -->
                            <button id="startButton" class="scan-button" title="Start/Stop ASL Recognition">
                                ü§ü ASL
                            </button>
                            
                            <!-- Utility buttons bottom right -->
                            <div class="utility-controls">
                                <button id="rotateBtn" class="control-btn utility" title="Rotate Camera View">üì±</button>
                                <button id="settingsBtn" class="control-btn utility" title="Settings">‚öôÔ∏è</button>
                                <button id="trainingBtn" class="control-btn utility" style="background: var(--success-color); color: white;" title="Training Data">
                                    üéì
                                </button>
                            </div>
                        </section>
        </div>
        <section class="identified-items" id="historySection" style="display: none;">
            <div class="settings-row" style="margin-bottom: 15px;">
                <h2 class="items-header" style="margin: 0;">Recent Sessions</h2>
                <button id="toggleHistoryBtn" class="settings-input" style="padding: 5px 10px; cursor: pointer;">Show</button>
            </div>
            <div id="historyList">
                <p style="color: var(--text-secondary); font-style: italic;">
                    No recent scanning sessions...
                </p>
            </div>
        </section>
    </main>
    
    <canvas id="canvas" style="display:none;"></canvas>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
    <script src="config.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Load HTML components
        async function loadComponents() {
            const components = [
                { id: 'loadingScreenContainer', url: 'ui_components/loading_screen.html' },
                { id: 'settingsMenuContainer', url: 'ui_components/settings_menu.html' },
                { id: 'trainingModalContainer', url: 'ui_components/training_modal.html' }
            ];

            for (const component of components) {
                try {
                    const response = await fetch(component.url);
                    const html = await response.text();
                    document.getElementById(component.id).innerHTML = html;
                } catch (error) {
                    console.error(`Failed to load component: ${component.url}`, error);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await loadComponents();
            // Initialize UI controls after components are loaded
            if (typeof initializeUIControls === 'function') {
                initializeUIControls();
            }
            // Initialize the app after components are loaded
            if (typeof initializeApp === 'function') {
                initializeApp();
            }
        });
    </script>
</body>
</html>